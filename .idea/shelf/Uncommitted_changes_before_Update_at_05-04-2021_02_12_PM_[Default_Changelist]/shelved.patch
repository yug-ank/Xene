Index: xinihostel/src/main/java/com/xenecompany/xinihostel/chatAll.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.xenecompany.xinihostel;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.DisplayMetrics;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.SearchView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Objects;\r\n\r\npublic class chatAll extends AppCompatActivity {\r\n    ArrayList<userObject> chatList;\r\n    RecyclerView recyclerView;\r\n    ImageView searchIcon;\r\n    SearchView searchView;\r\n    public  chat_all_adapter adapter;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_chat_all);\r\n        searchIcon = findViewById(R.id.activityChatAll_searchIcon);\r\n        searchView = findViewById(R.id.activityChatAll_searchView);\r\n        recyclerView = (RecyclerView) findViewById(R.id.activityChatAll_recyclerView);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n        recyclerView.setHasFixedSize(false);\r\n        DisplayMetrics displayMetrics= new DisplayMetrics();\r\n        getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);\r\n        int width=displayMetrics.widthPixels;\r\n        int height=displayMetrics.heightPixels;\r\n        getCHatList();\r\n        adapter = new chat_all_adapter(chatList , this , width , height);\r\n        recyclerView.setAdapter(adapter);\r\n\r\n        ///search\r\n        searchIcon.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                searchIcon.setVisibility(View.GONE);\r\n                findViewById(R.id.activityChatAll_textViewMessage).setVisibility(View.GONE);\r\n                searchView.setVisibility(View.VISIBLE);\r\n                searchView.setIconifiedByDefault(false);\r\n                searchView.requestFocus();\r\n                Log.i(\"yash\", searchView.isInEditMode()+\"\");\r\n            }\r\n        });\r\n\r\n        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {\r\n            @Override\r\n            public boolean onQueryTextSubmit(String query) {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public boolean onQueryTextChange(String newText) {\r\n                filter(newText);\r\n                return false;\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void filter(String newText) {\r\n        ArrayList<userObject> filterList = new ArrayList<>();\r\n        for(userObject temp : chatList){\r\n            if(temp.getUserName().toLowerCase().contains(newText.toLowerCase()))\r\n                filterList.add(temp);\r\n        }\r\n        adapter.filteredList(filterList);\r\n    }\r\n\r\n\r\n    void getCHatList(){\r\n        chatList = new ArrayList<>();\r\n//        Log.i(\"mob no\", FirebaseAuth.getInstance().getCurrentUser().getPhoneNumber());\r\n        DatabaseReference db = FirebaseDatabase.getInstance().getReference().child(\"hostel\").child(Objects.requireNonNull(FirebaseAuth.getInstance().getCurrentUser().getPhoneNumber()));\r\n//        DatabaseReference db = FirebaseDatabase.getInstance().getReference().child(\"hostel\").child(\"917339703405\");\r\n        db.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot.exists()){\r\n//                    Log.i(\"data snaphot exist\", FirebaseAuth.getInstance().getCurrentUser().getPhoneNumber());\r\n                    for(DataSnapshot childrens : snapshot.getChildren()){\r\n                        String temp = \"\";\r\n                        for(DataSnapshot chatroom : childrens.child(\"chatroomId\").getChildren())\r\n                            temp = chatroom.getKey();\r\n                        final userObject obj = new userObject( temp , childrens.child(\"userNumber\").getValue().toString());\r\n                    Log.i(\"chatroom and number \",obj.getChatroomId()+\" \"+obj.getUserNo());\r\n//                        DocumentReference db = FirebaseFirestore.getInstance().collection(\"Student\").document(obj.getUserNo());\r\n                        FirebaseFirestore.getInstance().collection(\"Student\").document(obj.getUserNo()).addSnapshotListener(new EventListener<DocumentSnapshot>() {\r\n                            @Override\r\n                            public void onEvent(@Nullable DocumentSnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                                if(value.exists()){\r\n                                    if(value.get(\"name\") != null)\r\n                                        obj.setUserName(value.get(\"name\").toString());\r\n                                    if(value.get(\"profilePicture\") != null)\r\n                                        obj.setProfilePicture(value.get(\"profilePicture\").toString());\r\n                                    Log.i(\"name\", obj.getUserName()+\" \"+obj.getProfilePicture());\r\n                                    chatList.add(obj);\r\n                                    adapter.notifyDataSetChanged();\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- xinihostel/src/main/java/com/xenecompany/xinihostel/chatAll.java	(revision a2a30ea2c4aeaa58cd49fd917133bdbe07a2519e)
+++ xinihostel/src/main/java/com/xenecompany/xinihostel/chatAll.java	(date 1617530960533)
@@ -57,9 +57,6 @@
                 searchIcon.setVisibility(View.GONE);
                 findViewById(R.id.activityChatAll_textViewMessage).setVisibility(View.GONE);
                 searchView.setVisibility(View.VISIBLE);
-                searchView.setIconifiedByDefault(false);
-                searchView.requestFocus();
-                Log.i("yash", searchView.isInEditMode()+"");
             }
         });
 
@@ -76,6 +73,15 @@
             }
         });
 
+        searchView.setOnCloseListener(new SearchView.OnCloseListener() {
+            @Override
+            public boolean onClose() {
+                searchView.setVisibility(View.GONE);
+                searchIcon.setVisibility(View.VISIBLE);
+                findViewById(R.id.activityChatAll_textViewMessage).setVisibility(View.VISIBLE);
+                return false;
+            }
+        });
 
     }
 
Index: xinihostel/src/main/res/layout/activity_chat_all.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".chatAll\">\r\n\r\n    <androidx.appcompat.widget.Toolbar\r\n        android:id=\"@+id/toolbar2\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"60dp\"\r\n        android:background=\"@color/colorPrimary\"\r\n        android:backgroundTint=\"@color/colorPrimary\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/activityChatAll_textViewMessage\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"0dp\"\r\n        android:layout_marginStart=\"10dp\"\r\n        android:text=\"Messages\"\r\n        android:textSize=\"25dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/toolbar2\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintHeight_default=\"percent\"\r\n        app:layout_constraintWidth_default=\"percent\"\r\n        app:layout_constraintHeight_percent=\"0.05\"\r\n        app:layout_constraintWidth_percent=\"0.5\"/>\r\n\r\n    <ImageView\r\n        android:id=\"@+id/activityChatAll_searchIcon\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"0dp\"\r\n        app:layout_constraintWidth_default=\"percent\"\r\n        app:layout_constraintHeight_default=\"percent\"\r\n        app:layout_constraintHeight_percent=\"0.06\"\r\n        app:layout_constraintWidth_percent=\"0.08\"\r\n        android:layout_marginEnd=\"16dp\"\r\n        android:src=\"@drawable/search\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/toolbar2\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/toolbar2\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <SearchView\r\n        android:id=\"@+id/activityChatAll_searchView\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"0dp\"\r\n        android:layout_marginEnd=\"16dp\"\r\n        android:src=\"@drawable/search\"\r\n        android:visibility=\"gone\"\r\n        app:layout_constraintStart_toStartOf=\"@id/toolbar2\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/toolbar2\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/toolbar2\"\r\n        app:layout_constraintHeight_default=\"percent\"\r\n        app:layout_constraintHeight_percent=\"0.06\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintWidth_default=\"percent\"\r\n        app:layout_constraintWidth_percent=\"1.0\" />\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/activityChatAll_recyclerView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"0dp\"\r\n        android:padding=\"10dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"1.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/toolbar2\"\r\n        app:layout_constraintVertical_bias=\"0.0\" />\r\n\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- xinihostel/src/main/res/layout/activity_chat_all.xml	(revision a2a30ea2c4aeaa58cd49fd917133bdbe07a2519e)
+++ xinihostel/src/main/res/layout/activity_chat_all.xml	(date 1617530647443)
@@ -59,7 +59,9 @@
         app:layout_constraintHeight_percent="0.06"
         app:layout_constraintTop_toTopOf="parent"
         app:layout_constraintWidth_default="percent"
-        app:layout_constraintWidth_percent="1.0" />
+        app:layout_constraintWidth_percent="1.0"
+        android:iconifiedByDefault="false"
+        />
 
     <androidx.recyclerview.widget.RecyclerView
         android:id="@+id/activityChatAll_recyclerView"
Index: xinihostel/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.xenecompany.xinihostel\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n     <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\r\n    <uses-permission android:name=\"com.google.android.providers.gsf.permission.READ_GSERVICES\"/>\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_navigation_full_logo_xini\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_navigation_full_logo_xini_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/AppTheme\">\r\n\r\n        <activity android:name=\".chatAll\"/>\r\n        <activity android:name=\".ChatPersonal\" android:windowSoftInputMode=\"adjustPan\"/>\r\n        <activity android:name=\".splash_screen\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n\r\n        <activity\r\n            android:name=\".Loginpage\"\r\n            android:windowSoftInputMode=\"adjustPan\">\r\n        </activity>\r\n        <activity\r\n            android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\" />\r\n        <activity android:name=\".otp_page\" />\r\n        <activity android:name=\".HomePage\" />\r\n        <activity\r\n            android:name=\".profile\"\r\n            android:windowSoftInputMode=\"adjustPan\">\r\n\r\n        </activity>\r\n        <activity android:name=\".studentDetails\">\r\n\r\n        </activity>\r\n        <activity android:name=\".About_Us\"/>\r\n        <activity android:name=\".contact_us\"\r\n            android:windowSoftInputMode=\"adjustPan\">\r\n        </activity>\r\n        <activity android:name=\".my_deals\"/>\r\n        <activity android:name=\".wishlist\"/>\r\n        <activity android:name=\".faq\"/>\r\n        <service\r\n            android:name=\".NotificationFireBaseMessagingService\">\r\n            <intent-filter>\r\n                <action android:name=\"com.google.firebase.MESSAGING_EVENT\"/>\r\n            </intent-filter>\r\n        </service>\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- xinihostel/src/main/AndroidManifest.xml	(revision a2a30ea2c4aeaa58cd49fd917133bdbe07a2519e)
+++ xinihostel/src/main/AndroidManifest.xml	(date 1617530395225)
@@ -17,7 +17,7 @@
         android:supportsRtl="true"
         android:theme="@style/AppTheme">
 
-        <activity android:name=".chatAll"/>
+        <activity android:name=".chatAll" android:windowSoftInputMode="adjustNothing"/>
         <activity android:name=".ChatPersonal" android:windowSoftInputMode="adjustPan"/>
         <activity android:name=".splash_screen">
             <intent-filter>

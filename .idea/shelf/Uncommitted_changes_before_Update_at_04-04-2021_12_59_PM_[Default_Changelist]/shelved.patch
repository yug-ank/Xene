Index: xinihostel/src/main/java/com/xenecompany/xinihostel/ChatPersonal.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.xenecompany.xinihostel;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.DisplayMetrics;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class ChatPersonal extends AppCompatActivity {\r\n//    private EditText messagebox;\r\n    EditText message;\r\n    ImageView send;\r\n    TextView nameOfHostel;\r\n    ImageView profilePic;\r\n    String name ,profilePicture ,messageId;\r\n    ArrayList<chat_object> chat;\r\n    RecyclerView recyclerView;\r\n    DatabaseReference db;\r\n    chatPersonalAdapter adapter;\r\n    int width;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_chat_personal);\r\n        DisplayMetrics displayMetrics= new DisplayMetrics();\r\n        getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);\r\n        width=displayMetrics.widthPixels;\r\n         message = findViewById(R.id.activityChatPersonal_editText);\r\n        nameOfHostel = findViewById(R.id.activityChatPersonal_name);\r\n        profilePic = findViewById(R.id.activityChatPersonal_profilePicture);\r\n         send = findViewById(R.id.activityChatPersonal_send);\r\n        recyclerView = findViewById(R.id.activityChatPersonal_recyclerView);\r\n\r\n        db = FirebaseDatabase.getInstance().getReference().child(\"chatrooms\").child(getIntent().getStringExtra(\"chatroom\"));\r\n        name = getIntent().getStringExtra(\"name\");\r\n        profilePicture = getIntent().getStringExtra(\"profilePicture\");\r\n        nameOfHostel.setText(name);\r\n        if(!profilePicture.isEmpty())\r\n            Picasso.get().load(profilePicture).into(profilePic);\r\n        initializeEditText();\r\n        initializeMessages();\r\n        getMessages();\r\n    }\r\n\r\n    private void initializeEditText() {\r\n        db.child(getIntent().getStringExtra(\"chatroom\")).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if (snapshot.exists()){\r\n                    if((Boolean) snapshot.child(\"text\").getValue()){\r\n                        message.setEnabled(true);\r\n                        message.setVisibility(View.VISIBLE);\r\n                        send.setVisibility(View.VISIBLE);\r\n                    }\r\n                    else{\r\n                        findViewById(R.id.activityChatPersonal_flag).setEnabled(true);\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void getMessages() {\r\n        DatabaseReference db1 = db;\r\n        db1.addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                if(snapshot.exists()){\r\n                    chat.add(new chat_object(snapshot.child(\"text\").getValue().toString(), snapshot.child(\"time\").getValue().toString(), snapshot.child(\"sender\").getValue().toString()));\r\n                    adapter.notifyDataSetChanged();\r\n                    Log.i(\"yash\", \"came13 \");\r\n                    recyclerView.smoothScrollToPosition(chat.size()-1);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void initializeMessages() {\r\n        chat = new ArrayList<>();\r\n        LinearLayoutManager layoutManager = new LinearLayoutManager(this, RecyclerView.VERTICAL,false);\r\n        layoutManager.setStackFromEnd(true);\r\n        recyclerView.setLayoutManager(layoutManager);\r\n        recyclerView.setHasFixedSize(false);\r\n        adapter = new chatPersonalAdapter(chat , this , width);\r\n        recyclerView.setAdapter(adapter);\r\n    }\r\n\r\n    public void sendMessage(View view) {\r\n        messageId = db.push().getKey();\r\n        DatabaseReference db1 = db.child(messageId);\r\n        Map object = new HashMap<>();\r\n        if(!message.getText().toString().isEmpty())\r\n            object.put(\"text\", message.getText().toString());\r\n        SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy.MM.dd G 'at' HH:mm:ss z\");\r\n        String currentDateandTime = sdf.format(new Date());\r\n        object.put(\"sender\", \"H\");\r\n        object.put(\"time\", currentDateandTime);\r\n        db1.updateChildren(object);\r\n        message.setText(null);\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- xinihostel/src/main/java/com/xenecompany/xinihostel/ChatPersonal.java	(revision 5bc0348584befda6d513245101ad2e80e88b078b)
+++ xinihostel/src/main/java/com/xenecompany/xinihostel/ChatPersonal.java	(date 1617521244491)
@@ -2,7 +2,6 @@
 
 import android.os.Bundle;
 import android.util.DisplayMetrics;
-import android.util.Log;
 import android.view.View;
 import android.widget.EditText;
 import android.widget.ImageView;
@@ -95,7 +94,6 @@
                 if(snapshot.exists()){
                     chat.add(new chat_object(snapshot.child("text").getValue().toString(), snapshot.child("time").getValue().toString(), snapshot.child("sender").getValue().toString()));
                     adapter.notifyDataSetChanged();
-                    Log.i("yash", "came13 ");
                     recyclerView.smoothScrollToPosition(chat.size()-1);
                 }
             }
